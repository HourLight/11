<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>馥靈之鑰 Hour Light｜靈性天使線上抽牌</title>
<link rel="icon" href="favicon.ico">

<style>
:root{--milk:#f9f5f0;--cocoa:#6b4f3e;--rose:#cda86e;--rose-dark:#a88257;}
*{box-sizing:border-box;margin:0;padding:0}
body{
    background:url('https://github.com/HourLight/11/raw/main/background.jpg') center/cover fixed no-repeat;
    font-family:"Noto Sans TC","PingFang TC","Arial",sans-serif;
    color:#333;text-align:center;
    padding:22px;
}
.main-title,.sub-title,.tagline{
    display:block;
    width:fit-content;
    margin:0 auto 12px;
    padding:10px 24px;
    background:#ffffff;
    border-radius:14px;
    box-shadow:0 4px 10px rgba(0,0,0,.18);
}
.main-title{font-size:2rem;color:#6b4f3e;}
.sub-title {font-size:1.35rem;color:#cda86e;}
.tagline   {font-size:1rem;color:#6b4f3e;max-width:880px;}

button{
    background:var(--rose);color:#fff;border:none;padding:14px 28px;font-size:20px;
    margin:8px;border-radius:15px;cursor:pointer;
    box-shadow:0 3px 8px rgba(0,0,0,.25);transition:.3s;
}
button:hover{background:var(--rose-dark);transform:translateY(-3px)}
#copyBtn{background:var(--cocoa)}
.card-container{display:inline-block;margin:16px}
.card-container img{width:220px;border-radius:15px;box-shadow:0 0 12px rgba(0,0,0,.35)}
.card-number{
    margin-top:10px;font-size:22px;font-weight:bold;
    background:rgba(255,255,255,.75);padding:6px 12px;border-radius:10px;
}
.card-container.reversed img {
  transform: rotate(180deg);
  transition: transform 0.6s ease;
}
.button-stack {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    margin-top: 30px;
}
@media(max-width:768px){
    button,#copyBtn{width:94%;margin:10px auto;font-size:22px}
    .card-container img{width:94%}
}
</style>
</head>
<body>

<h1 class="main-title">馥靈之鑰 Hour Light</h1>
<h2 class="sub-title">靈性天使線上抽牌</h2>
<p  class="tagline">130 張牌卡 × 130 位靈性天使 — H-O-U-R 四步快速對焦</p>

<!-- 抽牌按鈕 -->
<div>
  <button onclick="drawCards(1)">抽 1 張</button>
  <button onclick="drawCards(3)">抽 3 張</button>
  <button onclick="drawCards(5)">抽 5 張</button>
  <button onclick="drawCards(7)">抽 7 張</button>
  <button onclick="drawCards(9)">抽 9 張</button>
  <button onclick="drawCards(12)">抽 12 張</button>
  <button onclick="drawCards(15)">抽 15 張</button>
</div>

<!-- ✅ 抽牌結果顯示區 -->
<div id="result" style="margin-top: 24px;"></div>

<!-- 複製與返回 -->
<div class="button-stack">
  <button id="copyBtn" onclick="copyResult()">📋 複製牌卡編號</button>
  <a href="https://hourlight.github.io/" class="home-btn">🏠 返回首頁</a>
</div>

<!-- JS -->
<script>
let selectedCards = [];
let cardStates = [];

function formatCardNumber(n) {
  return n <= 22 ? 'A' + (n - 1).toString().padStart(2, '0') : (n - 22).toString().padStart(3, '0');
}

function drawCards(num) {
  alert("請閉眼深呼吸，心裡默念問題，再點確認。");
  selectedCards = [];
  cardStates = [];

  while (selectedCards.length < num) {
    const n = Math.floor(Math.random() * 130) + 1;
    if (!selectedCards.includes(n)) {
      selectedCards.push(n);
      const isReversed = Math.random() < 0.5;
      cardStates.push(isReversed ? "逆位" : "正位");
    }
  }

  document.getElementById('result').innerHTML = selectedCards.map((c, i) => {
    const icon = cardStates[i] === "逆位" ? "🌑" : "☀️";
    const label = `${icon} ${cardStates[i]}`;
    const cardNumber = formatCardNumber(c);
    const reversedClass = cardStates[i] === "逆位" ? "reversed" : "";
    return `
      <div class="card-container ${reversedClass}">
        <img src="https://github.com/HourLight/11/raw/main/LINE_ALBUM_2025.3.23_250323_${c}.jpg">
        <div class="card-number">編號：${cardNumber}（${label}）</div>
      </div>`;
  }).join('');
}

function copyResult() {
  if (!selectedCards.length) {
    alert("請先抽牌再複製！");
    return;
  }

  const resultText = selectedCards.map((c, i) => {
    const cardNumber = formatCardNumber(c);
    const state = cardStates[i];
    return `${cardNumber}（${state}）`;
  }).join(', ');

  navigator.clipboard.writeText(resultText)
    .then(() => alert('已複製：' + resultText))
    .catch(() => alert('複製失敗，請手動複製：' + resultText));
}
</script>
</body>
</html>
